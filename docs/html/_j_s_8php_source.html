<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JCore: configs/libs/minify/JS.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JCore
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d4e9ecbf6bd30435178ac7d44936e3e.html">configs</a></li><li class="navelem"><a class="el" href="dir_8be1966a5234304bd00e21fea3808330.html">libs</a></li><li class="navelem"><a class="el" href="dir_a925357f8777d0d794348ddcba12304b.html">minify</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">JS.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_j_s_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?php</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_matthias_mullie_1_1_minify.html">MatthiasMullie\Minify</a>;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html">   24</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html">JS</a> <span class="keyword">extends</span> <a class="code" href="namespace_minify.html">Minify</a></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;{</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a12cf3dd5c558860d116e18cebf6aa7de">   34</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a12cf3dd5c558860d116e18cebf6aa7de">REGEX_VARIABLE</a> = <span class="stringliteral">&#39;\b[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\x{02c1}\x{02c6}-\x{02d1}\x{02e0}-\x{02e4}\x{02ec}\x{02ee}\x{0370}-\x{0374}\x{0376}\x{0377}\x{037a}-\x{037d}\x{0386}\x{0388}-\x{038a}\x{038c}\x{038e}-\x{03a1}\x{03a3}-\x{03f5}\x{03f7}-\x{0481}\x{048a}-\x{0527}\x{0531}-\x{0556}\x{0559}\x{0561}-\x{0587}\x{05d0}-\x{05ea}\x{05f0}-\x{05f2}\x{0620}-\x{064a}\x{066e}\x{066f}\x{0671}-\x{06d3}\x{06d5}\x{06e5}\x{06e6}\x{06ee}\x{06ef}\x{06fa}-\x{06fc}\x{06ff}\x{0710}\x{0712}-\x{072f}\x{074d}-\x{07a5}\x{07b1}\x{07ca}-\x{07ea}\x{07f4}\x{07f5}\x{07fa}\x{0800}-\x{0815}\x{081a}\x{0824}\x{0828}\x{0840}-\x{0858}\x{08a0}\x{08a2}-\x{08ac}\x{0904}-\x{0939}\x{093d}\x{0950}\x{0958}-\x{0961}\x{0971}-\x{0977}\x{0979}-\x{097f}\x{0985}-\x{098c}\x{098f}\x{0990}\x{0993}-\x{09a8}\x{09aa}-\x{09b0}\x{09b2}\x{09b6}-\x{09b9}\x{09bd}\x{09ce}\x{09dc}\x{09dd}\x{09df}-\x{09e1}\x{09f0}\x{09f1}\x{0a05}-\x{0a0a}\x{0a0f}\x{0a10}\x{0a13}-\x{0a28}\x{0a2a}-\x{0a30}\x{0a32}\x{0a33}\x{0a35}\x{0a36}\x{0a38}\x{0a39}\x{0a59}-\x{0a5c}\x{0a5e}\x{0a72}-\x{0a74}\x{0a85}-\x{0a8d}\x{0a8f}-\x{0a91}\x{0a93}-\x{0aa8}\x{0aaa}-\x{0ab0}\x{0ab2}\x{0ab3}\x{0ab5}-\x{0ab9}\x{0abd}\x{0ad0}\x{0ae0}\x{0ae1}\x{0b05}-\x{0b0c}\x{0b0f}\x{0b10}\x{0b13}-\x{0b28}\x{0b2a}-\x{0b30}\x{0b32}\x{0b33}\x{0b35}-\x{0b39}\x{0b3d}\x{0b5c}\x{0b5d}\x{0b5f}-\x{0b61}\x{0b71}\x{0b83}\x{0b85}-\x{0b8a}\x{0b8e}-\x{0b90}\x{0b92}-\x{0b95}\x{0b99}\x{0b9a}\x{0b9c}\x{0b9e}\x{0b9f}\x{0ba3}\x{0ba4}\x{0ba8}-\x{0baa}\x{0bae}-\x{0bb9}\x{0bd0}\x{0c05}-\x{0c0c}\x{0c0e}-\x{0c10}\x{0c12}-\x{0c28}\x{0c2a}-\x{0c33}\x{0c35}-\x{0c39}\x{0c3d}\x{0c58}\x{0c59}\x{0c60}\x{0c61}\x{0c85}-\x{0c8c}\x{0c8e}-\x{0c90}\x{0c92}-\x{0ca8}\x{0caa}-\x{0cb3}\x{0cb5}-\x{0cb9}\x{0cbd}\x{0cde}\x{0ce0}\x{0ce1}\x{0cf1}\x{0cf2}\x{0d05}-\x{0d0c}\x{0d0e}-\x{0d10}\x{0d12}-\x{0d3a}\x{0d3d}\x{0d4e}\x{0d60}\x{0d61}\x{0d7a}-\x{0d7f}\x{0d85}-\x{0d96}\x{0d9a}-\x{0db1}\x{0db3}-\x{0dbb}\x{0dbd}\x{0dc0}-\x{0dc6}\x{0e01}-\x{0e30}\x{0e32}\x{0e33}\x{0e40}-\x{0e46}\x{0e81}\x{0e82}\x{0e84}\x{0e87}\x{0e88}\x{0e8a}\x{0e8d}\x{0e94}-\x{0e97}\x{0e99}-\x{0e9f}\x{0ea1}-\x{0ea3}\x{0ea5}\x{0ea7}\x{0eaa}\x{0eab}\x{0ead}-\x{0eb0}\x{0eb2}\x{0eb3}\x{0ebd}\x{0ec0}-\x{0ec4}\x{0ec6}\x{0edc}-\x{0edf}\x{0f00}\x{0f40}-\x{0f47}\x{0f49}-\x{0f6c}\x{0f88}-\x{0f8c}\x{1000}-\x{102a}\x{103f}\x{1050}-\x{1055}\x{105a}-\x{105d}\x{1061}\x{1065}\x{1066}\x{106e}-\x{1070}\x{1075}-\x{1081}\x{108e}\x{10a0}-\x{10c5}\x{10c7}\x{10cd}\x{10d0}-\x{10fa}\x{10fc}-\x{1248}\x{124a}-\x{124d}\x{1250}-\x{1256}\x{1258}\x{125a}-\x{125d}\x{1260}-\x{1288}\x{128a}-\x{128d}\x{1290}-\x{12b0}\x{12b2}-\x{12b5}\x{12b8}-\x{12be}\x{12c0}\x{12c2}-\x{12c5}\x{12c8}-\x{12d6}\x{12d8}-\x{1310}\x{1312}-\x{1315}\x{1318}-\x{135a}\x{1380}-\x{138f}\x{13a0}-\x{13f4}\x{1401}-\x{166c}\x{166f}-\x{167f}\x{1681}-\x{169a}\x{16a0}-\x{16ea}\x{16ee}-\x{16f0}\x{1700}-\x{170c}\x{170e}-\x{1711}\x{1720}-\x{1731}\x{1740}-\x{1751}\x{1760}-\x{176c}\x{176e}-\x{1770}\x{1780}-\x{17b3}\x{17d7}\x{17dc}\x{1820}-\x{1877}\x{1880}-\x{18a8}\x{18aa}\x{18b0}-\x{18f5}\x{1900}-\x{191c}\x{1950}-\x{196d}\x{1970}-\x{1974}\x{1980}-\x{19ab}\x{19c1}-\x{19c7}\x{1a00}-\x{1a16}\x{1a20}-\x{1a54}\x{1aa7}\x{1b05}-\x{1b33}\x{1b45}-\x{1b4b}\x{1b83}-\x{1ba0}\x{1bae}\x{1baf}\x{1bba}-\x{1be5}\x{1c00}-\x{1c23}\x{1c4d}-\x{1c4f}\x{1c5a}-\x{1c7d}\x{1ce9}-\x{1cec}\x{1cee}-\x{1cf1}\x{1cf5}\x{1cf6}\x{1d00}-\x{1dbf}\x{1e00}-\x{1f15}\x{1f18}-\x{1f1d}\x{1f20}-\x{1f45}\x{1f48}-\x{1f4d}\x{1f50}-\x{1f57}\x{1f59}\x{1f5b}\x{1f5d}\x{1f5f}-\x{1f7d}\x{1f80}-\x{1fb4}\x{1fb6}-\x{1fbc}\x{1fbe}\x{1fc2}-\x{1fc4}\x{1fc6}-\x{1fcc}\x{1fd0}-\x{1fd3}\x{1fd6}-\x{1fdb}\x{1fe0}-\x{1fec}\x{1ff2}-\x{1ff4}\x{1ff6}-\x{1ffc}\x{2071}\x{207f}\x{2090}-\x{209c}\x{2102}\x{2107}\x{210a}-\x{2113}\x{2115}\x{2119}-\x{211d}\x{2124}\x{2126}\x{2128}\x{212a}-\x{212d}\x{212f}-\x{2139}\x{213c}-\x{213f}\x{2145}-\x{2149}\x{214e}\x{2160}-\x{2188}\x{2c00}-\x{2c2e}\x{2c30}-\x{2c5e}\x{2c60}-\x{2ce4}\x{2ceb}-\x{2cee}\x{2cf2}\x{2cf3}\x{2d00}-\x{2d25}\x{2d27}\x{2d2d}\x{2d30}-\x{2d67}\x{2d6f}\x{2d80}-\x{2d96}\x{2da0}-\x{2da6}\x{2da8}-\x{2dae}\x{2db0}-\x{2db6}\x{2db8}-\x{2dbe}\x{2dc0}-\x{2dc6}\x{2dc8}-\x{2dce}\x{2dd0}-\x{2dd6}\x{2dd8}-\x{2dde}\x{2e2f}\x{3005}-\x{3007}\x{3021}-\x{3029}\x{3031}-\x{3035}\x{3038}-\x{303c}\x{3041}-\x{3096}\x{309d}-\x{309f}\x{30a1}-\x{30fa}\x{30fc}-\x{30ff}\x{3105}-\x{312d}\x{3131}-\x{318e}\x{31a0}-\x{31ba}\x{31f0}-\x{31ff}\x{3400}-\x{4db5}\x{4e00}-\x{9fcc}\x{a000}-\x{a48c}\x{a4d0}-\x{a4fd}\x{a500}-\x{a60c}\x{a610}-\x{a61f}\x{a62a}\x{a62b}\x{a640}-\x{a66e}\x{a67f}-\x{a697}\x{a6a0}-\x{a6ef}\x{a717}-\x{a71f}\x{a722}-\x{a788}\x{a78b}-\x{a78e}\x{a790}-\x{a793}\x{a7a0}-\x{a7aa}\x{a7f8}-\x{a801}\x{a803}-\x{a805}\x{a807}-\x{a80a}\x{a80c}-\x{a822}\x{a840}-\x{a873}\x{a882}-\x{a8b3}\x{a8f2}-\x{a8f7}\x{a8fb}\x{a90a}-\x{a925}\x{a930}-\x{a946}\x{a960}-\x{a97c}\x{a984}-\x{a9b2}\x{a9cf}\x{aa00}-\x{aa28}\x{aa40}-\x{aa42}\x{aa44}-\x{aa4b}\x{aa60}-\x{aa76}\x{aa7a}\x{aa80}-\x{aaaf}\x{aab1}\x{aab5}\x{aab6}\x{aab9}-\x{aabd}\x{aac0}\x{aac2}\x{aadb}-\x{aadd}\x{aae0}-\x{aaea}\x{aaf2}-\x{aaf4}\x{ab01}-\x{ab06}\x{ab09}-\x{ab0e}\x{ab11}-\x{ab16}\x{ab20}-\x{ab26}\x{ab28}-\x{ab2e}\x{abc0}-\x{abe2}\x{ac00}-\x{d7a3}\x{d7b0}-\x{d7c6}\x{d7cb}-\x{d7fb}\x{f900}-\x{fa6d}\x{fa70}-\x{fad9}\x{fb00}-\x{fb06}\x{fb13}-\x{fb17}\x{fb1d}\x{fb1f}-\x{fb28}\x{fb2a}-\x{fb36}\x{fb38}-\x{fb3c}\x{fb3e}\x{fb40}\x{fb41}\x{fb43}\x{fb44}\x{fb46}-\x{fbb1}\x{fbd3}-\x{fd3d}\x{fd50}-\x{fd8f}\x{fd92}-\x{fdc7}\x{fdf0}-\x{fdfb}\x{fe70}-\x{fe74}\x{fe76}-\x{fefc}\x{ff21}-\x{ff3a}\x{ff41}-\x{ff5a}\x{ff66}-\x{ffbe}\x{ffc2}-\x{ffc7}\x{ffca}-\x{ffcf}\x{ffd2}-\x{ffd7}\x{ffda}-\x{ffdc}][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\x{02c1}\x{02c6}-\x{02d1}\x{02e0}-\x{02e4}\x{02ec}\x{02ee}\x{0370}-\x{0374}\x{0376}\x{0377}\x{037a}-\x{037d}\x{0386}\x{0388}-\x{038a}\x{038c}\x{038e}-\x{03a1}\x{03a3}-\x{03f5}\x{03f7}-\x{0481}\x{048a}-\x{0527}\x{0531}-\x{0556}\x{0559}\x{0561}-\x{0587}\x{05d0}-\x{05ea}\x{05f0}-\x{05f2}\x{0620}-\x{064a}\x{066e}\x{066f}\x{0671}-\x{06d3}\x{06d5}\x{06e5}\x{06e6}\x{06ee}\x{06ef}\x{06fa}-\x{06fc}\x{06ff}\x{0710}\x{0712}-\x{072f}\x{074d}-\x{07a5}\x{07b1}\x{07ca}-\x{07ea}\x{07f4}\x{07f5}\x{07fa}\x{0800}-\x{0815}\x{081a}\x{0824}\x{0828}\x{0840}-\x{0858}\x{08a0}\x{08a2}-\x{08ac}\x{0904}-\x{0939}\x{093d}\x{0950}\x{0958}-\x{0961}\x{0971}-\x{0977}\x{0979}-\x{097f}\x{0985}-\x{098c}\x{098f}\x{0990}\x{0993}-\x{09a8}\x{09aa}-\x{09b0}\x{09b2}\x{09b6}-\x{09b9}\x{09bd}\x{09ce}\x{09dc}\x{09dd}\x{09df}-\x{09e1}\x{09f0}\x{09f1}\x{0a05}-\x{0a0a}\x{0a0f}\x{0a10}\x{0a13}-\x{0a28}\x{0a2a}-\x{0a30}\x{0a32}\x{0a33}\x{0a35}\x{0a36}\x{0a38}\x{0a39}\x{0a59}-\x{0a5c}\x{0a5e}\x{0a72}-\x{0a74}\x{0a85}-\x{0a8d}\x{0a8f}-\x{0a91}\x{0a93}-\x{0aa8}\x{0aaa}-\x{0ab0}\x{0ab2}\x{0ab3}\x{0ab5}-\x{0ab9}\x{0abd}\x{0ad0}\x{0ae0}\x{0ae1}\x{0b05}-\x{0b0c}\x{0b0f}\x{0b10}\x{0b13}-\x{0b28}\x{0b2a}-\x{0b30}\x{0b32}\x{0b33}\x{0b35}-\x{0b39}\x{0b3d}\x{0b5c}\x{0b5d}\x{0b5f}-\x{0b61}\x{0b71}\x{0b83}\x{0b85}-\x{0b8a}\x{0b8e}-\x{0b90}\x{0b92}-\x{0b95}\x{0b99}\x{0b9a}\x{0b9c}\x{0b9e}\x{0b9f}\x{0ba3}\x{0ba4}\x{0ba8}-\x{0baa}\x{0bae}-\x{0bb9}\x{0bd0}\x{0c05}-\x{0c0c}\x{0c0e}-\x{0c10}\x{0c12}-\x{0c28}\x{0c2a}-\x{0c33}\x{0c35}-\x{0c39}\x{0c3d}\x{0c58}\x{0c59}\x{0c60}\x{0c61}\x{0c85}-\x{0c8c}\x{0c8e}-\x{0c90}\x{0c92}-\x{0ca8}\x{0caa}-\x{0cb3}\x{0cb5}-\x{0cb9}\x{0cbd}\x{0cde}\x{0ce0}\x{0ce1}\x{0cf1}\x{0cf2}\x{0d05}-\x{0d0c}\x{0d0e}-\x{0d10}\x{0d12}-\x{0d3a}\x{0d3d}\x{0d4e}\x{0d60}\x{0d61}\x{0d7a}-\x{0d7f}\x{0d85}-\x{0d96}\x{0d9a}-\x{0db1}\x{0db3}-\x{0dbb}\x{0dbd}\x{0dc0}-\x{0dc6}\x{0e01}-\x{0e30}\x{0e32}\x{0e33}\x{0e40}-\x{0e46}\x{0e81}\x{0e82}\x{0e84}\x{0e87}\x{0e88}\x{0e8a}\x{0e8d}\x{0e94}-\x{0e97}\x{0e99}-\x{0e9f}\x{0ea1}-\x{0ea3}\x{0ea5}\x{0ea7}\x{0eaa}\x{0eab}\x{0ead}-\x{0eb0}\x{0eb2}\x{0eb3}\x{0ebd}\x{0ec0}-\x{0ec4}\x{0ec6}\x{0edc}-\x{0edf}\x{0f00}\x{0f40}-\x{0f47}\x{0f49}-\x{0f6c}\x{0f88}-\x{0f8c}\x{1000}-\x{102a}\x{103f}\x{1050}-\x{1055}\x{105a}-\x{105d}\x{1061}\x{1065}\x{1066}\x{106e}-\x{1070}\x{1075}-\x{1081}\x{108e}\x{10a0}-\x{10c5}\x{10c7}\x{10cd}\x{10d0}-\x{10fa}\x{10fc}-\x{1248}\x{124a}-\x{124d}\x{1250}-\x{1256}\x{1258}\x{125a}-\x{125d}\x{1260}-\x{1288}\x{128a}-\x{128d}\x{1290}-\x{12b0}\x{12b2}-\x{12b5}\x{12b8}-\x{12be}\x{12c0}\x{12c2}-\x{12c5}\x{12c8}-\x{12d6}\x{12d8}-\x{1310}\x{1312}-\x{1315}\x{1318}-\x{135a}\x{1380}-\x{138f}\x{13a0}-\x{13f4}\x{1401}-\x{166c}\x{166f}-\x{167f}\x{1681}-\x{169a}\x{16a0}-\x{16ea}\x{16ee}-\x{16f0}\x{1700}-\x{170c}\x{170e}-\x{1711}\x{1720}-\x{1731}\x{1740}-\x{1751}\x{1760}-\x{176c}\x{176e}-\x{1770}\x{1780}-\x{17b3}\x{17d7}\x{17dc}\x{1820}-\x{1877}\x{1880}-\x{18a8}\x{18aa}\x{18b0}-\x{18f5}\x{1900}-\x{191c}\x{1950}-\x{196d}\x{1970}-\x{1974}\x{1980}-\x{19ab}\x{19c1}-\x{19c7}\x{1a00}-\x{1a16}\x{1a20}-\x{1a54}\x{1aa7}\x{1b05}-\x{1b33}\x{1b45}-\x{1b4b}\x{1b83}-\x{1ba0}\x{1bae}\x{1baf}\x{1bba}-\x{1be5}\x{1c00}-\x{1c23}\x{1c4d}-\x{1c4f}\x{1c5a}-\x{1c7d}\x{1ce9}-\x{1cec}\x{1cee}-\x{1cf1}\x{1cf5}\x{1cf6}\x{1d00}-\x{1dbf}\x{1e00}-\x{1f15}\x{1f18}-\x{1f1d}\x{1f20}-\x{1f45}\x{1f48}-\x{1f4d}\x{1f50}-\x{1f57}\x{1f59}\x{1f5b}\x{1f5d}\x{1f5f}-\x{1f7d}\x{1f80}-\x{1fb4}\x{1fb6}-\x{1fbc}\x{1fbe}\x{1fc2}-\x{1fc4}\x{1fc6}-\x{1fcc}\x{1fd0}-\x{1fd3}\x{1fd6}-\x{1fdb}\x{1fe0}-\x{1fec}\x{1ff2}-\x{1ff4}\x{1ff6}-\x{1ffc}\x{2071}\x{207f}\x{2090}-\x{209c}\x{2102}\x{2107}\x{210a}-\x{2113}\x{2115}\x{2119}-\x{211d}\x{2124}\x{2126}\x{2128}\x{212a}-\x{212d}\x{212f}-\x{2139}\x{213c}-\x{213f}\x{2145}-\x{2149}\x{214e}\x{2160}-\x{2188}\x{2c00}-\x{2c2e}\x{2c30}-\x{2c5e}\x{2c60}-\x{2ce4}\x{2ceb}-\x{2cee}\x{2cf2}\x{2cf3}\x{2d00}-\x{2d25}\x{2d27}\x{2d2d}\x{2d30}-\x{2d67}\x{2d6f}\x{2d80}-\x{2d96}\x{2da0}-\x{2da6}\x{2da8}-\x{2dae}\x{2db0}-\x{2db6}\x{2db8}-\x{2dbe}\x{2dc0}-\x{2dc6}\x{2dc8}-\x{2dce}\x{2dd0}-\x{2dd6}\x{2dd8}-\x{2dde}\x{2e2f}\x{3005}-\x{3007}\x{3021}-\x{3029}\x{3031}-\x{3035}\x{3038}-\x{303c}\x{3041}-\x{3096}\x{309d}-\x{309f}\x{30a1}-\x{30fa}\x{30fc}-\x{30ff}\x{3105}-\x{312d}\x{3131}-\x{318e}\x{31a0}-\x{31ba}\x{31f0}-\x{31ff}\x{3400}-\x{4db5}\x{4e00}-\x{9fcc}\x{a000}-\x{a48c}\x{a4d0}-\x{a4fd}\x{a500}-\x{a60c}\x{a610}-\x{a61f}\x{a62a}\x{a62b}\x{a640}-\x{a66e}\x{a67f}-\x{a697}\x{a6a0}-\x{a6ef}\x{a717}-\x{a71f}\x{a722}-\x{a788}\x{a78b}-\x{a78e}\x{a790}-\x{a793}\x{a7a0}-\x{a7aa}\x{a7f8}-\x{a801}\x{a803}-\x{a805}\x{a807}-\x{a80a}\x{a80c}-\x{a822}\x{a840}-\x{a873}\x{a882}-\x{a8b3}\x{a8f2}-\x{a8f7}\x{a8fb}\x{a90a}-\x{a925}\x{a930}-\x{a946}\x{a960}-\x{a97c}\x{a984}-\x{a9b2}\x{a9cf}\x{aa00}-\x{aa28}\x{aa40}-\x{aa42}\x{aa44}-\x{aa4b}\x{aa60}-\x{aa76}\x{aa7a}\x{aa80}-\x{aaaf}\x{aab1}\x{aab5}\x{aab6}\x{aab9}-\x{aabd}\x{aac0}\x{aac2}\x{aadb}-\x{aadd}\x{aae0}-\x{aaea}\x{aaf2}-\x{aaf4}\x{ab01}-\x{ab06}\x{ab09}-\x{ab0e}\x{ab11}-\x{ab16}\x{ab20}-\x{ab26}\x{ab28}-\x{ab2e}\x{abc0}-\x{abe2}\x{ac00}-\x{d7a3}\x{d7b0}-\x{d7c6}\x{d7cb}-\x{d7fb}\x{f900}-\x{fa6d}\x{fa70}-\x{fad9}\x{fb00}-\x{fb06}\x{fb13}-\x{fb17}\x{fb1d}\x{fb1f}-\x{fb28}\x{fb2a}-\x{fb36}\x{fb38}-\x{fb3c}\x{fb3e}\x{fb40}\x{fb41}\x{fb43}\x{fb44}\x{fb46}-\x{fbb1}\x{fbd3}-\x{fd3d}\x{fd50}-\x{fd8f}\x{fd92}-\x{fdc7}\x{fdf0}-\x{fdfb}\x{fe70}-\x{fe74}\x{fe76}-\x{fefc}\x{ff21}-\x{ff3a}\x{ff41}-\x{ff5a}\x{ff66}-\x{ffbe}\x{ffc2}-\x{ffc7}\x{ffca}-\x{ffcf}\x{ffd2}-\x{ffd7}\x{ffda}-\x{ffdc}0-9\x{0300}-\x{036f}\x{0483}-\x{0487}\x{0591}-\x{05bd}\x{05bf}\x{05c1}\x{05c2}\x{05c4}\x{05c5}\x{05c7}\x{0610}-\x{061a}\x{064b}-\x{0669}\x{0670}\x{06d6}-\x{06dc}\x{06df}-\x{06e4}\x{06e7}\x{06e8}\x{06ea}-\x{06ed}\x{06f0}-\x{06f9}\x{0711}\x{0730}-\x{074a}\x{07a6}-\x{07b0}\x{07c0}-\x{07c9}\x{07eb}-\x{07f3}\x{0816}-\x{0819}\x{081b}-\x{0823}\x{0825}-\x{0827}\x{0829}-\x{082d}\x{0859}-\x{085b}\x{08e4}-\x{08fe}\x{0900}-\x{0903}\x{093a}-\x{093c}\x{093e}-\x{094f}\x{0951}-\x{0957}\x{0962}\x{0963}\x{0966}-\x{096f}\x{0981}-\x{0983}\x{09bc}\x{09be}-\x{09c4}\x{09c7}\x{09c8}\x{09cb}-\x{09cd}\x{09d7}\x{09e2}\x{09e3}\x{09e6}-\x{09ef}\x{0a01}-\x{0a03}\x{0a3c}\x{0a3e}-\x{0a42}\x{0a47}\x{0a48}\x{0a4b}-\x{0a4d}\x{0a51}\x{0a66}-\x{0a71}\x{0a75}\x{0a81}-\x{0a83}\x{0abc}\x{0abe}-\x{0ac5}\x{0ac7}-\x{0ac9}\x{0acb}-\x{0acd}\x{0ae2}\x{0ae3}\x{0ae6}-\x{0aef}\x{0b01}-\x{0b03}\x{0b3c}\x{0b3e}-\x{0b44}\x{0b47}\x{0b48}\x{0b4b}-\x{0b4d}\x{0b56}\x{0b57}\x{0b62}\x{0b63}\x{0b66}-\x{0b6f}\x{0b82}\x{0bbe}-\x{0bc2}\x{0bc6}-\x{0bc8}\x{0bca}-\x{0bcd}\x{0bd7}\x{0be6}-\x{0bef}\x{0c01}-\x{0c03}\x{0c3e}-\x{0c44}\x{0c46}-\x{0c48}\x{0c4a}-\x{0c4d}\x{0c55}\x{0c56}\x{0c62}\x{0c63}\x{0c66}-\x{0c6f}\x{0c82}\x{0c83}\x{0cbc}\x{0cbe}-\x{0cc4}\x{0cc6}-\x{0cc8}\x{0cca}-\x{0ccd}\x{0cd5}\x{0cd6}\x{0ce2}\x{0ce3}\x{0ce6}-\x{0cef}\x{0d02}\x{0d03}\x{0d3e}-\x{0d44}\x{0d46}-\x{0d48}\x{0d4a}-\x{0d4d}\x{0d57}\x{0d62}\x{0d63}\x{0d66}-\x{0d6f}\x{0d82}\x{0d83}\x{0dca}\x{0dcf}-\x{0dd4}\x{0dd6}\x{0dd8}-\x{0ddf}\x{0df2}\x{0df3}\x{0e31}\x{0e34}-\x{0e3a}\x{0e47}-\x{0e4e}\x{0e50}-\x{0e59}\x{0eb1}\x{0eb4}-\x{0eb9}\x{0ebb}\x{0ebc}\x{0ec8}-\x{0ecd}\x{0ed0}-\x{0ed9}\x{0f18}\x{0f19}\x{0f20}-\x{0f29}\x{0f35}\x{0f37}\x{0f39}\x{0f3e}\x{0f3f}\x{0f71}-\x{0f84}\x{0f86}\x{0f87}\x{0f8d}-\x{0f97}\x{0f99}-\x{0fbc}\x{0fc6}\x{102b}-\x{103e}\x{1040}-\x{1049}\x{1056}-\x{1059}\x{105e}-\x{1060}\x{1062}-\x{1064}\x{1067}-\x{106d}\x{1071}-\x{1074}\x{1082}-\x{108d}\x{108f}-\x{109d}\x{135d}-\x{135f}\x{1712}-\x{1714}\x{1732}-\x{1734}\x{1752}\x{1753}\x{1772}\x{1773}\x{17b4}-\x{17d3}\x{17dd}\x{17e0}-\x{17e9}\x{180b}-\x{180d}\x{1810}-\x{1819}\x{18a9}\x{1920}-\x{192b}\x{1930}-\x{193b}\x{1946}-\x{194f}\x{19b0}-\x{19c0}\x{19c8}\x{19c9}\x{19d0}-\x{19d9}\x{1a17}-\x{1a1b}\x{1a55}-\x{1a5e}\x{1a60}-\x{1a7c}\x{1a7f}-\x{1a89}\x{1a90}-\x{1a99}\x{1b00}-\x{1b04}\x{1b34}-\x{1b44}\x{1b50}-\x{1b59}\x{1b6b}-\x{1b73}\x{1b80}-\x{1b82}\x{1ba1}-\x{1bad}\x{1bb0}-\x{1bb9}\x{1be6}-\x{1bf3}\x{1c24}-\x{1c37}\x{1c40}-\x{1c49}\x{1c50}-\x{1c59}\x{1cd0}-\x{1cd2}\x{1cd4}-\x{1ce8}\x{1ced}\x{1cf2}-\x{1cf4}\x{1dc0}-\x{1de6}\x{1dfc}-\x{1dff}\x{200c}\x{200d}\x{203f}\x{2040}\x{2054}\x{20d0}-\x{20dc}\x{20e1}\x{20e5}-\x{20f0}\x{2cef}-\x{2cf1}\x{2d7f}\x{2de0}-\x{2dff}\x{302a}-\x{302f}\x{3099}\x{309a}\x{a620}-\x{a629}\x{a66f}\x{a674}-\x{a67d}\x{a69f}\x{a6f0}\x{a6f1}\x{a802}\x{a806}\x{a80b}\x{a823}-\x{a827}\x{a880}\x{a881}\x{a8b4}-\x{a8c4}\x{a8d0}-\x{a8d9}\x{a8e0}-\x{a8f1}\x{a900}-\x{a909}\x{a926}-\x{a92d}\x{a947}-\x{a953}\x{a980}-\x{a983}\x{a9b3}-\x{a9c0}\x{a9d0}-\x{a9d9}\x{aa29}-\x{aa36}\x{aa43}\x{aa4c}\x{aa4d}\x{aa50}-\x{aa59}\x{aa7b}\x{aab0}\x{aab2}-\x{aab4}\x{aab7}\x{aab8}\x{aabe}\x{aabf}\x{aac1}\x{aaeb}-\x{aaef}\x{aaf5}\x{aaf6}\x{abe3}-\x{abea}\x{abec}\x{abed}\x{abf0}-\x{abf9}\x{fb1e}\x{fe00}-\x{fe0f}\x{fe20}-\x{fe26}\x{fe33}\x{fe34}\x{fe4d}-\x{fe4f}\x{ff10}-\x{ff19}\x{ff3f}]*\b&#39;</span>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a8d7fb576f8489b3cafea309900f09f7a">   44</a></span>&#160;    <span class="keyword">protected</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a8d7fb576f8489b3cafea309900f09f7a">$keywordsReserved</a> = array();</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a95e7a6e13c7064c6e9f648900cec88a4">   59</a></span>&#160;    <span class="keyword">protected</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a95e7a6e13c7064c6e9f648900cec88a4">$keywordsBefore</a> = array();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#aef7c893f18edbfaf0809f410dfb331ca">   74</a></span>&#160;    <span class="keyword">protected</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#aef7c893f18edbfaf0809f410dfb331ca">$keywordsAfter</a> = array();</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">   85</a></span>&#160;    <span class="keyword">protected</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">$operators</a> = array();</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a610065a2d3c7c4297f5982ee00a2a14c">  101</a></span>&#160;    <span class="keyword">protected</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a610065a2d3c7c4297f5982ee00a2a14c">$operatorsBefore</a> = array();</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#ab44d9a8cc330f11a11db768d395617a2">  120</a></span>&#160;    <span class="keyword">protected</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#ab44d9a8cc330f11a11db768d395617a2">$operatorsAfter</a> = array();</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a095c5d389db211932136b53f25f39685">  125</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a095c5d389db211932136b53f25f39685">__construct</a>()</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        call_user_func_array(array(<span class="stringliteral">&#39;parent&#39;</span>, <span class="stringliteral">&#39;__construct&#39;</span>), func_get_args());</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        $dataDir = __DIR__.<span class="stringliteral">&#39;/data/js/&#39;</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        $options = FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        $this-&gt;keywordsReserved = file($dataDir.<span class="stringliteral">&#39;keywords_reserved.txt&#39;</span>, $options);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        $this-&gt;keywordsBefore = file($dataDir.<span class="stringliteral">&#39;keywords_before.txt&#39;</span>, $options);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        $this-&gt;keywordsAfter = file($dataDir.<span class="stringliteral">&#39;keywords_after.txt&#39;</span>, $options);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        $this-&gt;operators = file($dataDir.<span class="stringliteral">&#39;operators.txt&#39;</span>, $options);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        $this-&gt;operatorsBefore = file($dataDir.<span class="stringliteral">&#39;operators_before.txt&#39;</span>, $options);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        $this-&gt;operatorsAfter = file($dataDir.<span class="stringliteral">&#39;operators_after.txt&#39;</span>, $options);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1aa2488bc65ea8e7a25e86a51e83030d">  147</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1aa2488bc65ea8e7a25e86a51e83030d">execute</a>($path = null)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        $content = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">         * Let&#39;s first take out strings, comments and regular expressions.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">         * All of these can contain JS code-like characters, and we should make</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">         * sure any further magic ignores anything inside of these.</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">         *</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">         * Consider this example, where we should not strip any whitespace:</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">         * var str = &quot;a   test&quot;;</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">         *</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">         * Comments will be removed altogether, strings and regular expressions</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">         * will be replaced by placeholder text, which we&#39;ll restore later.</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        $this-&gt;<a class="code" href="class_matthias_mullie_1_1_minify_1_1_minify.html#a18537425ff4d0809df556413c551c08b">extractStrings</a>(<span class="charliteral">&#39;\&#39;</span><span class="stringliteral">&quot;`&#39;);</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="stringliteral">        $this-&gt;stripComments();</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="stringliteral">        $this-&gt;extractRegex();</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="stringliteral">        // loop files</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="stringliteral">        foreach ($this-&gt;data as $source =&gt; $js) {</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="stringliteral">            // take out strings, comments &amp; regex (for which we&#39;ve registered</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="stringliteral">            // the regexes just a few lines earlier)</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="stringliteral">            $js = $this-&gt;replace($js);</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="stringliteral">            $js = $this-&gt;propertyNotation($js);</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="stringliteral">            $js = $this-&gt;shortenBools($js);</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="stringliteral">            $js = $this-&gt;stripWhitespace($js);</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="stringliteral">            // combine js: separating the scripts by a ;</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="stringliteral">            $content .= $js.&quot;</span>;<span class="stringliteral">&quot;;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="stringliteral">        }</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="stringliteral">        // clean up leftover `;`s from the combination of multiple scripts</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="stringliteral">        $content = ltrim($content, &#39;;&#39;);</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="stringliteral">        $content = (string) substr($content, 0, -1);</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="stringliteral">        /*</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="stringliteral">         * Earlier, we extracted strings &amp; regular expressions and replaced them</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="stringliteral">         * with placeholder text. This will restore them.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="stringliteral">         */</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="stringliteral">        $content = $this-&gt;restoreExtractedData($content);</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="stringliteral">        return $content;</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="stringliteral">    }</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a8fb78eabb9eac25b85b1bfd9f0d3b2be">  196</a></span>&#160;<span class="stringliteral">    protected function stripComments()</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="stringliteral">    {</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="stringliteral">        // single-line comments</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="stringliteral">        $this-&gt;registerPattern(&#39;/\/\/.*$/m&#39;, &#39;&#39;);</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="stringliteral">        // multi-line comments</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="stringliteral">        $this-&gt;registerPattern(&#39;/\/\*.*?\*\//s&#39;, &#39;&#39;);</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="stringliteral">    }</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#ad08cf2057356993422eae16534cd9ee5">  222</a></span>&#160;<span class="stringliteral">    protected function extractRegex()</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="stringliteral">    {</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="stringliteral">        // PHP only supports $this inside anonymous functions since 5.4</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="stringliteral">        $minifier = $this;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="stringliteral">        $callback = function ($match) use ($minifier) {</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="stringliteral">            $count = count($minifier-&gt;extracted);</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="stringliteral">            $placeholder = &#39;&quot;</span><span class="stringliteral">&#39;.$count.&#39;</span><span class="stringliteral">&quot;&#39;;</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="stringliteral">            $minifier-&gt;extracted[$placeholder] = $match[0];</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="stringliteral">            return $placeholder;</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="stringliteral">        };</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="stringliteral">        // match all chars except `/` and `\`</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="stringliteral">        // `\` is allowed though, along with whatever char follows (which is the</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="stringliteral">        // one being escaped)</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="stringliteral">        // this should allow all chars, except for an unescaped `/` (= the one</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="stringliteral">        // closing the regex)</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="stringliteral">        // then also ignore bare `/` inside `[]`, where they don&#39;t need to be</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="stringliteral">        // escaped: anything inside `[]` can be ignored safely</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="stringliteral">        $pattern = &#39;\\/(?:[^\\[\\/\\\\\n\r]+|(?:\\\\.)+|(?:\\[(?:[^\\]\\\\\n\r]+|(?:\\\\.)+)+\\])+)++\\/[gimuy]*&#39;;</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="stringliteral">        // a regular expression can only be followed by a few operators or some</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="stringliteral">        // of the RegExp methods (a `\` followed by a variable or value is</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="stringliteral">        // likely part of a division, not a regex)</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="stringliteral">        $keywords = array(&#39;do&#39;, &#39;in&#39;, &#39;new&#39;, &#39;else&#39;, &#39;throw&#39;, &#39;yield&#39;, &#39;delete&#39;, &#39;return&#39;,  &#39;typeof&#39;);</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="stringliteral">        $before = &#39;([=:,;\+\-\*\/\}\(\{\[&amp;\|!]|^|&#39;.implode(&#39;|&#39;, $keywords).&#39;)\s*&#39;;</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="stringliteral">        $propertiesAndMethods = array(</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="stringliteral">            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp#Properties_2</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="stringliteral">            &#39;constructor&#39;,</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="stringliteral">            &#39;flags&#39;,</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="stringliteral">            &#39;global&#39;,</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="stringliteral">            &#39;ignoreCase&#39;,</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="stringliteral">            &#39;multiline&#39;,</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="stringliteral">            &#39;source&#39;,</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="stringliteral">            &#39;sticky&#39;,</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="stringliteral">            &#39;unicode&#39;,</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="stringliteral">            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp#Methods_2</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="stringliteral">            &#39;compile(&#39;,</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="stringliteral">            &#39;exec(&#39;,</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="stringliteral">            &#39;test(&#39;,</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="stringliteral">            &#39;toSource(&#39;,</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="stringliteral">            &#39;toString(&#39;,</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="stringliteral">        );</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="stringliteral">        $delimiters = array_fill(0, count($propertiesAndMethods), &#39;/&#39;);</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="stringliteral">        $propertiesAndMethods = array_map(&#39;preg_quote&#39;, $propertiesAndMethods, $delimiters);</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="stringliteral">        $after = &#39;(?=\s*([\.,;\)\}&amp;\|+]|\/\/|$|\.(&#39;.implode(&#39;|&#39;, $propertiesAndMethods).&#39;)))&#39;;</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="stringliteral">        $this-&gt;registerPattern(&#39;/&#39;.$before.&#39;\K&#39;.$pattern.$after.&#39;/&#39;, $callback);</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="stringliteral">        // regular expressions following a `)` are rather annoying to detect...</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="stringliteral">        // quite often, `/` after `)` is a division operator &amp; if it happens to</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="stringliteral">        // be followed by another one (or a comment), it is likely to be</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="stringliteral">        // confused for a regular expression</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="stringliteral">        // however, it&#39;s perfectly possible for a regex to follow a `)`: after</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="stringliteral">        // a single-line `if()`, `while()`, ... statement, for example</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="stringliteral">        // since, when they occur like that, they&#39;re always the start of a</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="stringliteral">        // statement, there&#39;s only a limited amount of ways they can be useful:</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="stringliteral">        // by calling the regex methods directly</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="stringliteral">        // if a regex following `)` is not followed by `.&lt;property or method&gt;`,</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="stringliteral">        // it&#39;s quite likely not a regex</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="stringliteral">        $before = &#39;\)\s*&#39;;</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="stringliteral">        $after = &#39;(?=\s*\.(&#39;.implode(&#39;|&#39;, $propertiesAndMethods).&#39;))&#39;;</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="stringliteral">        $this-&gt;registerPattern(&#39;/&#39;.$before.&#39;\K&#39;.$pattern.$after.&#39;/&#39;, $callback);</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="stringliteral">        // 1 more edge case: a regex can be followed by a lot more operators or</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="stringliteral">        // keywords if there&#39;s a newline (ASI) in between, where the operator</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="stringliteral">        // actually starts a new statement</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="stringliteral">        // (https://github.com/matthiasmullie/minify/issues/56)</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="stringliteral">        $operators = $this-&gt;getOperatorsForRegex($this-&gt;operatorsBefore, &#39;/&#39;);</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="stringliteral">        $operators += $this-&gt;getOperatorsForRegex($this-&gt;keywordsReserved, &#39;/&#39;);</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="stringliteral">        $after = &#39;(?=\s*\n\s*(&#39;.implode(&#39;|&#39;, $operators).&#39;))&#39;;</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="stringliteral">        $this-&gt;registerPattern(&#39;/&#39;.$pattern.$after.&#39;/&#39;, $callback);</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="stringliteral">    }</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#adbd4bf2b141faa4d6afdf86d7efdf6a7">  311</a></span>&#160;<span class="stringliteral">    protected function stripWhitespace($content)</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="stringliteral">    {</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="stringliteral">        // uniform line endings, make them all line feed</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="stringliteral">        $content = str_replace(array(&quot;</span><a class="code" href="cli_2errors_2404_8php.html#ace0fd03cd383f20ce6ea63247a207294">\r\n</a><span class="stringliteral">&quot;, &quot;</span>\r<span class="stringliteral">&quot;), &quot;</span><a class="code" href="cli_2errors_2404_8php.html#ace0fd03cd383f20ce6ea63247a207294">\n</a><span class="stringliteral">&quot;, $content);</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="stringliteral">        // collapse all non-line feed whitespace into a single space</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="stringliteral">        $content = preg_replace(&#39;/[^\S\n]+/&#39;, &#39; &#39;, $content);</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="stringliteral">        // strip leading &amp; trailing whitespace</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="stringliteral">        $content = str_replace(array(&quot;</span> <a class="code" href="cli_2errors_2404_8php.html#ace0fd03cd383f20ce6ea63247a207294">\n</a><span class="stringliteral">&quot;, &quot;</span><a class="code" href="cli_2errors_2404_8php.html#ace0fd03cd383f20ce6ea63247a207294">\n</a> <span class="stringliteral">&quot;), &quot;</span><a class="code" href="cli_2errors_2404_8php.html#ace0fd03cd383f20ce6ea63247a207294">\n</a><span class="stringliteral">&quot;, $content);</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="stringliteral">        // collapse consecutive line feeds into just 1</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="stringliteral">        $content = preg_replace(&#39;/\n+/&#39;, &quot;</span><a class="code" href="cli_2errors_2404_8php.html#ace0fd03cd383f20ce6ea63247a207294">\n</a><span class="stringliteral">&quot;, $content);</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="stringliteral">        $operatorsBefore = $this-&gt;getOperatorsForRegex($this-&gt;operatorsBefore, &#39;/&#39;);</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="stringliteral">        $operatorsAfter = $this-&gt;getOperatorsForRegex($this-&gt;operatorsAfter, &#39;/&#39;);</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="stringliteral">        $operators = $this-&gt;getOperatorsForRegex($this-&gt;operators, &#39;/&#39;);</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="stringliteral">        $keywordsBefore = $this-&gt;getKeywordsForRegex($this-&gt;keywordsBefore, &#39;/&#39;);</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="stringliteral">        $keywordsAfter = $this-&gt;getKeywordsForRegex($this-&gt;keywordsAfter, &#39;/&#39;);</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="stringliteral">        // strip whitespace that ends in (or next line begin with) an operator</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="stringliteral">        // that allows statements to be broken up over multiple lines</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="stringliteral">        unset($operatorsBefore[&#39;+&#39;], $operatorsBefore[&#39;-&#39;], $operatorsAfter[&#39;+&#39;], $operatorsAfter[&#39;-&#39;]);</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="stringliteral">        $content = preg_replace(</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="stringliteral">            array(</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="stringliteral">                &#39;/(&#39;.implode(&#39;|&#39;, $operatorsBefore).&#39;)\s+/&#39;,</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="stringliteral">                &#39;/\s+(&#39;.implode(&#39;|&#39;, $operatorsAfter).&#39;)/&#39;,</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="stringliteral">            ), &#39;\\1&#39;, $content</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="stringliteral">        );</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="stringliteral">        // make sure + and - can&#39;t be mistaken for, or joined into ++ and --</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="stringliteral">        $content = preg_replace(</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="stringliteral">            array(</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="stringliteral">                &#39;/(?&lt;![\+\-])\s*([\+\-])(?![\+\-])/&#39;,</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="stringliteral">                &#39;/(?&lt;![\+\-])([\+\-])\s*(?![\+\-])/&#39;,</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="stringliteral">            ), &#39;\\1&#39;, $content</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="stringliteral">        );</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="stringliteral">        // collapse whitespace around reserved words into single space</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="stringliteral">        $content = preg_replace(&#39;/(^|[;\}\s])\K(&#39;.implode(&#39;|&#39;, $keywordsBefore).&#39;)\s+/&#39;, &#39;\\2 &#39;, $content);</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="stringliteral">        $content = preg_replace(&#39;/\s+(&#39;.implode(&#39;|&#39;, $keywordsAfter).&#39;)(?=([;\{\s]|$))/&#39;, &#39; \\1&#39;, $content);</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="stringliteral">        /*</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="stringliteral">         * We didn&#39;t strip whitespace after a couple of operators because they</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="stringliteral">         * could be used in different contexts and we can&#39;t be sure it&#39;s ok to</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="stringliteral">         * strip the newlines. However, we can safely strip any non-line feed</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="stringliteral">         * whitespace that follows them.</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="stringliteral">         */</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="stringliteral">        $operatorsDiffBefore = array_diff($operators, $operatorsBefore);</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="stringliteral">        $operatorsDiffAfter = array_diff($operators, $operatorsAfter);</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="stringliteral">        $content = preg_replace(&#39;/(&#39;.implode(&#39;|&#39;, $operatorsDiffBefore).&#39;)[^\S\n]+/&#39;, &#39;\\1&#39;, $content);</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="stringliteral">        $content = preg_replace(&#39;/[^\S\n]+(&#39;.implode(&#39;|&#39;, $operatorsDiffAfter).&#39;)/&#39;, &#39;\\1&#39;, $content);</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="stringliteral">        /*</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="stringliteral">         * Whitespace after `return` can be omitted in a few occasions</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="stringliteral">         * (such as when followed by a string or regex)</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="stringliteral">         * Same for whitespace in between `)` and `{`, or between `{` and some</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="stringliteral">         * keywords.</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="stringliteral">         */</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="stringliteral">        $content = preg_replace(&#39;/\breturn\s+([&quot;</span>\<span class="stringliteral">&#39;\/\+\-])/&#39;</span>, <span class="stringliteral">&#39;return$1&#39;</span>, $content);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        $content = preg_replace(<span class="stringliteral">&#39;/\)\s+\{/&#39;</span>, <span class="stringliteral">&#39;){&#39;</span>, $content);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        $content = preg_replace(<span class="stringliteral">&#39;/}\n(else|catch|finally)\b/&#39;</span>, <span class="stringliteral">&#39;}$1&#39;</span>, $content);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">         * Get rid of double semicolons, except where they can be used like:</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">         * &quot;for(v=1,_=b;;)&quot;, &quot;for(v=1;;v++)&quot; or &quot;for(;;ja||(ja=true))&quot;.</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">         * I&#39;ll safeguard these double semicolons inside for-loops by</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">         * temporarily replacing them with an invalid condition: they won&#39;t have</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">         * a double semicolon and will be easy to spot to restore afterwards.</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        $content = preg_replace(<span class="stringliteral">&#39;/\bfor\(([^;]*);;([^;]*)\)/&#39;</span>, <span class="stringliteral">&#39;for(\\1;-;\\2)&#39;</span>, $content);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        $content = preg_replace(<span class="stringliteral">&#39;/;+/&#39;</span>, <span class="charliteral">&#39;;&#39;</span>, $content);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        $content = preg_replace(<span class="stringliteral">&#39;/\bfor\(([^;]*);-;([^;]*)\)/&#39;</span>, <span class="stringliteral">&#39;for(\\1;;\\2)&#39;</span>, $content);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">         * Next, we&#39;ll be removing all semicolons where ASI kicks in.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">         * for-loops however, can have an empty body (ending in only a</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">         * semicolon), like: `for(i=1;i&lt;3;i++);`, of `for(i in list);`</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">         * Here, nothing happens during the loop; it&#39;s just used to keep</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">         * increasing `i`. With that ; omitted, the next line would be expected</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">         * to be the for-loop&#39;s body... Same goes for while loops.</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">         * I&#39;m going to double that semicolon (if any) so after the next line,</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">         * which strips semicolons here &amp; there, we&#39;re still left with this one.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        $content = preg_replace(<span class="stringliteral">&#39;/(for\([^;\{]*;[^;\{]*;[^;\{]*\));(\}|$)/s&#39;</span>, <span class="stringliteral">&#39;\\1;;\\2&#39;</span>, $content);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        $content = preg_replace(<span class="stringliteral">&#39;/(for\([^;\{]+\s+in\s+[^;\{]+\));(\}|$)/s&#39;</span>, <span class="stringliteral">&#39;\\1;;\\2&#39;</span>, $content);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">         * Below will also keep `;` after a `do{}while();` along with `while();`</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">         * While these could be stripped after do-while, detecting this</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">         * distinction is cumbersome, so I&#39;ll play it safe and make sure `;`</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">         * after any kind of `while` is kept.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        $content = preg_replace(<span class="stringliteral">&#39;/(while\([^;\{]+\));(\}|$)/s&#39;</span>, <span class="stringliteral">&#39;\\1;;\\2&#39;</span>, $content);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">         * We also can&#39;t strip empty else-statements. Even though they&#39;re</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">         * useless and probably shouldn&#39;t be in the code in the first place, we</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">         * shouldn&#39;t be stripping the `;` that follows it as it breaks the code.</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">         * We can just remove those useless else-statements completely.</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">         *</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">         * @see https://github.com/matthiasmullie/minify/issues/91</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        $content = preg_replace(<span class="stringliteral">&#39;/else;/s&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, $content);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">         * We also don&#39;t really want to terminate statements followed by closing</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">         * curly braces (which we&#39;ve ignored completely up until now) or end-of-</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">         * script: ASI will kick in here &amp; we&#39;re all about minifying.</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">         * Semicolons at beginning of the file don&#39;t make any sense either.</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        $content = preg_replace(<span class="stringliteral">&#39;/;(\}|$)/s&#39;</span>, <span class="stringliteral">&#39;\\1&#39;</span>, $content);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        $content = ltrim($content, <span class="charliteral">&#39;;&#39;</span>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="comment">// get rid of remaining whitespace af beginning/end</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">return</span> trim($content);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a41db08fbd446929eb2cb972b23de5f08">  437</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a41db08fbd446929eb2cb972b23de5f08">getOperatorsForRegex</a>(array <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">$operators</a>, $delimiter = <span class="charliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="comment">// escape operators for use in regex</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        $delimiters = array_fill(0, count(<a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">$operators</a>), $delimiter);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        $escaped = array_map(<span class="stringliteral">&#39;preg_quote&#39;</span>, <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">$operators</a>, $delimiters);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">$operators</a> = array_combine(<a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">$operators</a>, $escaped);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">// ignore + &amp; - for now, they&#39;ll get special treatment</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        unset(<a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">$operators</a>[<span class="charliteral">&#39;+&#39;</span>], <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">$operators</a>[<span class="charliteral">&#39;-&#39;</span>]);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment">// dot can not just immediately follow a number; it can be confused for</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment">// decimal point, or calling a method on it, e.g. 42 .toString()</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">$operators</a>[<span class="charliteral">&#39;.&#39;</span>] = <span class="stringliteral">&#39;(?&lt;![0-9]\s)\.&#39;</span>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="comment">// don&#39;t confuse = with other assignment shortcuts (e.g. +=)</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        $chars = preg_quote(<span class="stringliteral">&#39;+-*\=&lt;&gt;%&amp;|&#39;</span>, $delimiter);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">$operators</a>[<span class="charliteral">&#39;=&#39;</span>] = <span class="stringliteral">&#39;(?&lt;![&#39;</span>.$chars.<span class="stringliteral">&#39;])\=&#39;</span>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">$operators</a>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a47f60e2c9334416e914d13faddf177be">  468</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a47f60e2c9334416e914d13faddf177be">getKeywordsForRegex</a>(array $keywords, $delimiter = <span class="charliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="comment">// escape keywords for use in regex</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        $delimiter = array_fill(0, count($keywords), $delimiter);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        $escaped = array_map(<span class="stringliteral">&#39;preg_quote&#39;</span>, $keywords, $delimiter);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="comment">// add word boundaries</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        array_walk($keywords, <span class="keyword">function</span> ($value) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="keywordflow">return</span> <span class="charliteral">&#39;\b&#39;</span>.$value.<span class="charliteral">&#39;\b&#39;</span>;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        });</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        $keywords = array_combine($keywords, $escaped);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">return</span> $keywords;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#ab64411da118a02783a73ad02210efa67">  491</a></span>&#160;    <span class="keyword">protected</span> <span class="keyword">function</span> <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#ab64411da118a02783a73ad02210efa67">propertyNotation</a>($content)</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="comment">// PHP only supports $this inside anonymous functions since 5.4</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        $minifier = $this;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        $keywords = <a class="code" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a8d7fb576f8489b3cafea309900f09f7a">$this-&gt;keywordsReserved</a>;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        $callback = <span class="keyword">function</span> ($match) use ($minifier, $keywords) {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            $property = trim($minifier-&gt;extracted[$match[1]], <span class="charliteral">&#39;\&#39;</span><span class="stringliteral">&quot;&#39;);</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="stringliteral">            /*</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="stringliteral">             * Check if the property is a reserved keyword. In this context (as</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="stringliteral">             * property of an object literal/array) it shouldn&#39;t matter, but IE8</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="stringliteral">             * freaks out with &quot;</span>Expected identifier<span class="stringliteral">&quot;.</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="stringliteral">             */</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="stringliteral">            if (in_array($property, $keywords)) {</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="stringliteral">                return $match[0];</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="stringliteral">            }</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="stringliteral">            /*</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="stringliteral">             * See if the property is in a variable-like format (e.g.</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="stringliteral">             * array[&#39;key-here&#39;] can&#39;t be replaced by array.key-here since &#39;-&#39;</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="stringliteral">             * is not a valid character there.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="stringliteral">             */</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="stringliteral">            if (!preg_match(&#39;/^&#39;.$minifier::REGEX_VARIABLE.&#39;$/u&#39;, $property)) {</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="stringliteral">                return $match[0];</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="stringliteral">            }</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="stringliteral">            return &#39;.&#39;.$property;</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="stringliteral">        };</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="stringliteral">        /*</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="stringliteral">         * Figure out if previous character is a variable name (of the array</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="stringliteral">         * we want to use property notation on) - this is to make sure</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="stringliteral">         * standalone [&#39;value&#39;] arrays aren&#39;t confused for keys-of-an-array.</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="stringliteral">         * We can (and only have to) check the last character, because PHP&#39;s</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="stringliteral">         * regex implementation doesn&#39;t allow unfixed-length look-behind</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="stringliteral">         * assertions.</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="stringliteral">         */</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="stringliteral">        preg_match(&#39;/(\[[^\]]+\])[^\]]*$/&#39;, static::REGEX_VARIABLE, $previousChar);</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="stringliteral">        $previousChar = $previousChar[1];</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="stringliteral">        /*</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="stringliteral">         * Make sure word preceding the [&#39;value&#39;] is not a keyword, e.g.</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="stringliteral">         * return[&#39;x&#39;]. Because -again- PHP&#39;s regex implementation doesn&#39;t allow</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="stringliteral">         * unfixed-length look-behind assertions, I&#39;m just going to do a lot of</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="stringliteral">         * separate look-behind assertions, one for each keyword.</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="stringliteral">         */</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="stringliteral">        $keywords = $this-&gt;getKeywordsForRegex($keywords);</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="stringliteral">        $keywords = &#39;(?&lt;!&#39;.implode(&#39;)(?&lt;!&#39;, $keywords).&#39;)&#39;;</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="stringliteral">        return preg_replace_callback(&#39;/(?&lt;=&#39;.$previousChar.&#39;|\])&#39;.$keywords.&#39;\[\s*(([\&#39;&quot;</span>])[0-9]+\\2)\s*\]/u<span class="stringliteral">&#39;, $callback, $content);</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="stringliteral">    }</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00550"></a><span class="lineno"><a class="line" href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a6a82b2385c2bb7631cc544552560e530">  550</a></span>&#160;<span class="stringliteral">    protected function shortenBools($content)</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="stringliteral">    {</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="stringliteral">        /*</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="stringliteral">         * &#39;</span><span class="keyword">true</span><span class="stringliteral">&#39; or &#39;</span><span class="keyword">false</span><span class="stringliteral">&#39; could be used as property names (which may be</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="stringliteral">         * followed by whitespace) - we must not replace those!</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="stringliteral">         * Since PHP doesn&#39;</span>t allow variable-length (to account <span class="keywordflow">for</span> the</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;         * whitespace) lookbehind assertions, I need to capture the leading</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;         * character and check <span class="keywordflow">if</span> it<span class="stringliteral">&#39;s a `.`</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="stringliteral">         */</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="stringliteral">        $callback = function ($match) {</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="stringliteral">            if (trim($match[1]) === &#39;</span>.<span class="stringliteral">&#39;) {</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="stringliteral">                return $match[0];</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="stringliteral">            }</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="stringliteral">            return $match[1].($match[2] === &#39;</span>true<span class="stringliteral">&#39; ? &#39;</span>!0<span class="stringliteral">&#39; : &#39;</span>!1<span class="stringliteral">&#39;);</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="stringliteral">        };</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="stringliteral">        $content = preg_replace_callback(&#39;</span>/(^|.\s*)\b(<span class="keyword">true</span>|<span class="keyword">false</span>)\b(?!:)/<span class="stringliteral">&#39;, $callback, $content);</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="stringliteral">        // for(;;) is exactly the same as while(true), but shorter :)</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="stringliteral">        $content = preg_replace(&#39;</span>/\bwhile\(!0\){/<span class="stringliteral">&#39;, &#39;</span><span class="keywordflow">for</span>(;;){<span class="stringliteral">&#39;, $content);</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="stringliteral">        // now make sure we didn&#39;</span>t turn any <span class="keywordflow">do</span> ... <span class="keywordflow">while</span>(<span class="keyword">true</span>) into <span class="keywordflow">do</span> ... <span class="keywordflow">for</span>(;;)</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        preg_match_all(<span class="stringliteral">&#39;/\bdo\b/&#39;</span>, $content, $dos, PREG_OFFSET_CAPTURE | PREG_SET_ORDER);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="comment">// go backward to make sure positional offsets aren&#39;t altered when $content changes</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        $dos = array_reverse($dos);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">foreach</span> ($dos as $do) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            $offsetDo = $do[0][1];</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="comment">// find all `while` (now `for`) following `do`: one of those must be</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            <span class="comment">// associated with the `do` and be turned back into `while`</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            preg_match_all(<span class="stringliteral">&#39;/\bfor\(;;\)/&#39;</span>, $content, $whiles, PREG_OFFSET_CAPTURE | PREG_SET_ORDER, $offsetDo);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="keywordflow">foreach</span> ($whiles as $while) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                $offsetWhile = $while[0][1];</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                $open = substr_count($content, <span class="charliteral">&#39;{&#39;</span>, $offsetDo, $offsetWhile - $offsetDo);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                $close = substr_count($content, <span class="charliteral">&#39;}&#39;</span>, $offsetDo, $offsetWhile - $offsetDo);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                <span class="keywordflow">if</span> ($open === $close) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                    <span class="comment">// only restore `while` if amount of `{` and `}` are the same;</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                    <span class="comment">// otherwise, that `for` isn&#39;t associated with this `do`</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                    $content = substr_replace($content, <span class="stringliteral">&#39;while(!0)&#39;</span>, $offsetWhile, strlen(<span class="stringliteral">&#39;for(;;)&#39;</span>));</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">return</span> $content;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div><div class="ttc" id="cli_2errors_2404_8php_html_ace0fd03cd383f20ce6ea63247a207294"><div class="ttname"><a href="cli_2errors_2404_8php.html#ace0fd03cd383f20ce6ea63247a207294">n</a></div><div class="ttdeci">n n</div><div class="ttdef"><b>Definition:</b> <a href="cli_2errors_2404_8php_source.html#l00004">404.php:4</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_a95e7a6e13c7064c6e9f648900cec88a4"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a95e7a6e13c7064c6e9f648900cec88a4">MatthiasMullie\Minify\JS\$keywordsBefore</a></div><div class="ttdeci">$keywordsBefore</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00059">JS.php:59</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html">MatthiasMullie\Minify\JS</a></div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00024">JS.php:24</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_ab64411da118a02783a73ad02210efa67"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#ab64411da118a02783a73ad02210efa67">MatthiasMullie\Minify\JS\propertyNotation</a></div><div class="ttdeci">propertyNotation($content)</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00491">JS.php:491</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_a8d7fb576f8489b3cafea309900f09f7a"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a8d7fb576f8489b3cafea309900f09f7a">MatthiasMullie\Minify\JS\$keywordsReserved</a></div><div class="ttdeci">$keywordsReserved</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00044">JS.php:44</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_minify_html_a18537425ff4d0809df556413c551c08b"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_minify.html#a18537425ff4d0809df556413c551c08b">MatthiasMullie\Minify\Minify\extractStrings</a></div><div class="ttdeci">extractStrings($chars='\'&quot;', $placeholderPrefix = '') </div><div class="ttdef"><b>Definition:</b> <a href="_minify_8php_source.html#l00338">Minify.php:338</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_a095c5d389db211932136b53f25f39685"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a095c5d389db211932136b53f25f39685">MatthiasMullie\Minify\JS\__construct</a></div><div class="ttdeci">__construct()</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00125">JS.php:125</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_a41db08fbd446929eb2cb972b23de5f08"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a41db08fbd446929eb2cb972b23de5f08">MatthiasMullie\Minify\JS\getOperatorsForRegex</a></div><div class="ttdeci">getOperatorsForRegex(array $operators, $delimiter='/')</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00437">JS.php:437</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_a1aa2488bc65ea8e7a25e86a51e83030d"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1aa2488bc65ea8e7a25e86a51e83030d">MatthiasMullie\Minify\JS\execute</a></div><div class="ttdeci">execute($path=null)</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00147">JS.php:147</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_a47f60e2c9334416e914d13faddf177be"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a47f60e2c9334416e914d13faddf177be">MatthiasMullie\Minify\JS\getKeywordsForRegex</a></div><div class="ttdeci">getKeywordsForRegex(array $keywords, $delimiter='/')</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00468">JS.php:468</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_ab44d9a8cc330f11a11db768d395617a2"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#ab44d9a8cc330f11a11db768d395617a2">MatthiasMullie\Minify\JS\$operatorsAfter</a></div><div class="ttdeci">$operatorsAfter</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00120">JS.php:120</a></div></div>
<div class="ttc" id="namespace_minify_html"><div class="ttname"><a href="namespace_minify.html">Minify</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_a1a526a18e63270ba6814d699637f22bf"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a1a526a18e63270ba6814d699637f22bf">MatthiasMullie\Minify\JS\$operators</a></div><div class="ttdeci">$operators</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00085">JS.php:85</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_a610065a2d3c7c4297f5982ee00a2a14c"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a610065a2d3c7c4297f5982ee00a2a14c">MatthiasMullie\Minify\JS\$operatorsBefore</a></div><div class="ttdeci">$operatorsBefore</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00101">JS.php:101</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_a12cf3dd5c558860d116e18cebf6aa7de"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#a12cf3dd5c558860d116e18cebf6aa7de">MatthiasMullie\Minify\JS\REGEX_VARIABLE</a></div><div class="ttdeci">const REGEX_VARIABLE</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00034">JS.php:34</a></div></div>
<div class="ttc" id="namespace_matthias_mullie_1_1_minify_html"><div class="ttname"><a href="namespace_matthias_mullie_1_1_minify.html">MatthiasMullie\Minify</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_s_s_8php_source.html#l00012">CSS.php:12</a></div></div>
<div class="ttc" id="class_matthias_mullie_1_1_minify_1_1_j_s_html_aef7c893f18edbfaf0809f410dfb331ca"><div class="ttname"><a href="class_matthias_mullie_1_1_minify_1_1_j_s.html#aef7c893f18edbfaf0809f410dfb331ca">MatthiasMullie\Minify\JS\$keywordsAfter</a></div><div class="ttdeci">$keywordsAfter</div><div class="ttdef"><b>Definition:</b> <a href="_j_s_8php_source.html#l00074">JS.php:74</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
